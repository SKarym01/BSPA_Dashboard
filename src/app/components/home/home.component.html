<div class="p-8 w-full max-w-6xl mx-auto animate-fade-in">

    <!-- Welcome Section -->
    <div class="mb-10">
        <h1 class="text-3xl font-bold text-slate-800 tracking-tight mb-2">
            Welcome back, Shaam
        </h1>
        <p class="text-slate-500 text-lg">
            Here is an overview of your recent BSPA activities.
        </p>
    </div>

    <!-- Quick Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">

        <!-- Active Projects -->
        <div class="modern-card p-6 flex flex-col justify-between h-32 hover:border-blue-400 cursor-default">
            <div class="flex justify-between items-start">
                <span class="text-slate-500 font-medium text-sm uppercase">Active Projects</span>
                <div class="p-2 bg-blue-50 text-blue-600 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
            </div>
            <div class="text-3xl font-bold text-slate-800">{{ dataService.drafts.length }}</div>
        </div>

        <!-- Pending Validations -->
        <div class="modern-card p-6 flex flex-col justify-between h-32 hover:border-yellow-400 cursor-default">
            <div class="flex justify-between items-start">
                <span class="text-slate-500 font-medium text-sm uppercase">Running Simulations</span>
                <div class="p-2 bg-yellow-50 text-yellow-600 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                </div>
            </div>
            <div class="text-3xl font-bold text-slate-800">
                {{ runningDraftsCount }}
            </div>
        </div>

    </div>

    <!-- Recent Activity Table (Dynamic) -->
    <div class="modern-panel bg-white overflow-hidden">
        <div class="px-6 py-4 border-b border-slate-200">
            <h3 class="font-bold text-slate-700">Recent Projects</h3>
        </div>
        <table class="w-full text-left text-sm">
            <thead class="bg-slate-50 text-slate-500 uppercase text-xs font-bold border-b border-slate-200">
                <tr>
                    <th class="px-6 py-3">Project / EPC</th>
                    <th class="px-6 py-3">Status</th>
                    <th class="px-6 py-3">Last Modified</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">

                <ng-container *ngFor="let draft of dataService.drafts">
                    <tr class="hover:bg-slate-50/50 transition-colors cursor-pointer bg-white">
                        <td class="px-6 py-4 font-medium text-slate-800">
                            <div class="flex flex-col">
                                <span>{{ draft.name }}</span>
                                <span class="text-xs text-slate-400 font-mono">{{ draft.epc }}</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 rounded-full text-xs font-bold uppercase tracking-wide border"
                                [ngClass]="{
                                    'bg-slate-100 text-slate-600 border-slate-200': draft.status === 'Draft',
                                    'bg-blue-100 text-blue-600 border-blue-200 animate-pulse': draft.status === 'Running',
                                    'bg-emerald-100 text-emerald-600 border-emerald-200': draft.status === 'Completed'
                                }">
                                {{ draft.status }}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-slate-500">{{ draft.lastModified | date:'short' }}</td>
                    </tr>
                </ng-container>
                <tr *ngIf="dataService.drafts.length === 0">
                    <td colspan="3" class="px-6 py-8 text-center text-slate-400 italic">
                        No recent projects found. Start a new BSPA to get started.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>